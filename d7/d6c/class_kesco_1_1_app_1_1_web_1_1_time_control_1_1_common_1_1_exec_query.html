<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kesco Development Network: Класс Kesco.App.Web.TimeControl.Common.ExecQuery</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Kesco Development Network
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Поиск');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d2/d2a/namespace_kesco.html">Kesco</a></li><li class="navelem"><a class="el" href="../../d1/d3e/namespace_kesco_1_1_app.html">App</a></li><li class="navelem"><a class="el" href="../../d6/dd4/namespace_kesco_1_1_app_1_1_web.html">Web</a></li><li class="navelem"><a class="el" href="../../d3/d62/namespace_kesco_1_1_app_1_1_web_1_1_time_control.html">TimeControl</a></li><li class="navelem"><a class="el" href="../../d7/d3c/namespace_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common.html">Common</a></li><li class="navelem"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html">ExecQuery</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Открытые члены</a> &#124;
<a href="#pri-methods">Закрытые члены</a>  </div>
  <div class="headertitle">
<div class="title">Класс Kesco.App.Web.TimeControl.Common.ExecQuery</div>  </div>
</div><!--header-->
<div class="contents">

<p>Класс с запросами к БД  
 <a href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#details">Подробнее...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Открытые члены</h2></td></tr>
<tr class="memitem:a7761a4f06f2159cd9e45c3f57e244e09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/db8/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_card_person.html">CardPerson</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#a7761a4f06f2159cd9e45c3f57e244e09">GetCardPersonById</a> (string id)</td></tr>
<tr class="memdesc:a7761a4f06f2159cd9e45c3f57e244e09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Получение сотрудника по ID  <a href="#a7761a4f06f2159cd9e45c3f57e244e09">Подробнее...</a><br /></td></tr>
<tr class="separator:a7761a4f06f2159cd9e45c3f57e244e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afac5d8a717195b7004a8a2427613516f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#afac5d8a717195b7004a8a2427613516f">CheckPositionByCompanyId</a> (string id, string position, bool isRevers, bool isNull)</td></tr>
<tr class="memdesc:afac5d8a717195b7004a8a2427613516f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Проверка наличия должности у компании  <a href="#afac5d8a717195b7004a8a2427613516f">Подробнее...</a><br /></td></tr>
<tr class="separator:afac5d8a717195b7004a8a2427613516f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7648c4939ab86afb7bf018f8c352d7d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#aa7648c4939ab86afb7bf018f8c352d7d">CheckPositionBySubdivisionId</a> (string id, string position, bool isRevers, bool isNull)</td></tr>
<tr class="memdesc:aa7648c4939ab86afb7bf018f8c352d7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Проверка наличия должности у подразделения  <a href="#aa7648c4939ab86afb7bf018f8c352d7d">Подробнее...</a><br /></td></tr>
<tr class="separator:aa7648c4939ab86afb7bf018f8c352d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc87c2203fbea972f5820df1542fd77f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#acc87c2203fbea972f5820df1542fd77f">CheckSubdivisionByCompanyId</a> (string id, string subdivision, bool isRevers, bool isNull)</td></tr>
<tr class="memdesc:acc87c2203fbea972f5820df1542fd77f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Проверка наличия подразделения у компании  <a href="#acc87c2203fbea972f5820df1542fd77f">Подробнее...</a><br /></td></tr>
<tr class="separator:acc87c2203fbea972f5820df1542fd77f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a774af469bdbc214b8b33a8c93290e01f"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="../../dd/d88/class_kesco_1_1_lib_1_1_entities_1_1_persons_1_1_person_customer.html">PersonCustomer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#a774af469bdbc214b8b33a8c93290e01f">GetCompanyBySubdivision</a> (string subdivision)</td></tr>
<tr class="memdesc:a774af469bdbc214b8b33a8c93290e01f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Получение списка компаний по подразделению  <a href="#a774af469bdbc214b8b33a8c93290e01f">Подробнее...</a><br /></td></tr>
<tr class="separator:a774af469bdbc214b8b33a8c93290e01f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44d64670c5117b066b29a05378db5546"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#a44d64670c5117b066b29a05378db5546">CheckPersonBySubdivisionId</a> (string id, string idEmloyee, bool isRevers, bool isNull)</td></tr>
<tr class="memdesc:a44d64670c5117b066b29a05378db5546"><td class="mdescLeft">&#160;</td><td class="mdescRight">Проверка наличия сотрудника у подразделения  <a href="#a44d64670c5117b066b29a05378db5546">Подробнее...</a><br /></td></tr>
<tr class="separator:a44d64670c5117b066b29a05378db5546"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c2158750fcf8815f94544cdcccd6231"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#a0c2158750fcf8815f94544cdcccd6231">CheckPersonByPositionId</a> (string id, string idEmloyee, bool isRevers, bool isNull)</td></tr>
<tr class="memdesc:a0c2158750fcf8815f94544cdcccd6231"><td class="mdescLeft">&#160;</td><td class="mdescRight">Проверка наличия сотрудника у должности  <a href="#a0c2158750fcf8815f94544cdcccd6231">Подробнее...</a><br /></td></tr>
<tr class="separator:a0c2158750fcf8815f94544cdcccd6231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fba1ac3d413af0dd7b448b2b1709499"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#a3fba1ac3d413af0dd7b448b2b1709499">CheckPersonByCompanyId</a> (string id, string fio, bool isRevers, bool isNull)</td></tr>
<tr class="memdesc:a3fba1ac3d413af0dd7b448b2b1709499"><td class="mdescLeft">&#160;</td><td class="mdescRight">Проверка наличия сотрудника у компании  <a href="#a3fba1ac3d413af0dd7b448b2b1709499">Подробнее...</a><br /></td></tr>
<tr class="separator:a3fba1ac3d413af0dd7b448b2b1709499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a456884c31efe9004d28ad69125ee3862"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/dc6/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds.html">EmployeePeriodsInfoDs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#a456884c31efe9004d28ad69125ee3862">CompleteEmployeePeriodsInfoDs</a> (string emplName, string companyInfo, string postInfo, string divisionInfo, DateTime startDate, DateTime endDate, bool isRusLocal, int tz, bool activeTimeExit, DateTime tm, bool active, string isReversCompany, string isReversSubdivision, string isReversPosition, string isReversPerson, bool subEmpl)</td></tr>
<tr class="memdesc:a456884c31efe9004d28ad69125ee3862"><td class="mdescLeft">&#160;</td><td class="mdescRight">Получение проходов сотрудника  <a href="#a456884c31efe9004d28ad69125ee3862">Подробнее...</a><br /></td></tr>
<tr class="separator:a456884c31efe9004d28ad69125ee3862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90c73fa2ef4032adad1ba800f6f17d99"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/dc6/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds.html">EmployeePeriodsInfoDs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#a90c73fa2ef4032adad1ba800f6f17d99">CompleteEmployeePeriodsInfoDs</a> (int emplId, DateTime startDate, DateTime endDate, int tz)</td></tr>
<tr class="memdesc:a90c73fa2ef4032adad1ba800f6f17d99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Получение проходов сотрудника  <a href="#a90c73fa2ef4032adad1ba800f6f17d99">Подробнее...</a><br /></td></tr>
<tr class="separator:a90c73fa2ef4032adad1ba800f6f17d99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aded2cba6d1da2a45f94ce414d7a094a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/dc6/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds.html">EmployeePeriodsInfoDs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#aded2cba6d1da2a45f94ce414d7a094a6">CompleteEmployeePeriodsInfoDs</a> (int emplId, DateTime startDateP1, DateTime endDateP1, DateTime startDateP2, DateTime endDateP2)</td></tr>
<tr class="memdesc:aded2cba6d1da2a45f94ce414d7a094a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Получение проходов сотрудника  <a href="#aded2cba6d1da2a45f94ce414d7a094a6">Подробнее...</a><br /></td></tr>
<tr class="separator:aded2cba6d1da2a45f94ce414d7a094a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0126a19cde97d3f6426f49600c955e47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#a0126a19cde97d3f6426f49600c955e47">SaveSettings</a> (<a class="el" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html">Filter</a> filter)</td></tr>
<tr class="memdesc:a0126a19cde97d3f6426f49600c955e47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Сохранение настроек пользователя  <a href="#a0126a19cde97d3f6426f49600c955e47">Подробнее...</a><br /></td></tr>
<tr class="separator:a0126a19cde97d3f6426f49600c955e47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a389b11353c5f80eec13f3f1088e90126"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html">Filter</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#a389b11353c5f80eec13f3f1088e90126">GetSettings</a> (<a class="el" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html">Filter</a> filter)</td></tr>
<tr class="memdesc:a389b11353c5f80eec13f3f1088e90126"><td class="mdescLeft">&#160;</td><td class="mdescRight">Получение настроек пользователя  <a href="#a389b11353c5f80eec13f3f1088e90126">Подробнее...</a><br /></td></tr>
<tr class="separator:a389b11353c5f80eec13f3f1088e90126"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9d7ab9e34d1ea9b0893528cffe44dfa"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#aa9d7ab9e34d1ea9b0893528cffe44dfa">GetPersonIdByEmployeeId</a> (string id)</td></tr>
<tr class="memdesc:aa9d7ab9e34d1ea9b0893528cffe44dfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Получение кода сотрудника по коду лица  <a href="#aa9d7ab9e34d1ea9b0893528cffe44dfa">Подробнее...</a><br /></td></tr>
<tr class="separator:aa9d7ab9e34d1ea9b0893528cffe44dfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Закрытые члены</h2></td></tr>
<tr class="memitem:aadabb9a7b73b8e0303af8f688e64add5"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#aadabb9a7b73b8e0303af8f688e64add5">Serialize</a> (<a class="el" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html">Filter</a> filter, Type t, string type)</td></tr>
<tr class="separator:aadabb9a7b73b8e0303af8f688e64add5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fb5aabdedf2a086076136bb7ab53310"><td class="memItemLeft" align="right" valign="top">object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#a0fb5aabdedf2a086076136bb7ab53310">Deserialize</a> (string source, Type t)</td></tr>
<tr class="separator:a0fb5aabdedf2a086076136bb7ab53310"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>
<div class="textblock"><p>Класс с запросами к БД </p>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00022">22</a></p>
</div><h2 class="groupheader">Методы</h2>
<a id="a3fba1ac3d413af0dd7b448b2b1709499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fba1ac3d413af0dd7b448b2b1709499">&#9670;&nbsp;</a></span>CheckPersonByCompanyId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Kesco.App.Web.TimeControl.Common.ExecQuery.CheckPersonByCompanyId </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>fio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isRevers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isNull</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Проверка наличия сотрудника у компании </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Код компании</td></tr>
    <tr><td class="paramname">fio</td><td>сотрудник </td></tr>
    <tr><td class="paramname">isRevers</td><td>Признак реверса для компаний </td></tr>
    <tr><td class="paramname">isNull</td><td>Признак наименования компании - NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>да/нет</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DetailedException</td><td>SQL ошибка</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00231">231</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d65/_kesco_8_app_8_web_8_time_control_2_forms_2_default_8aspx_8cs_source.html#l01086">Kesco.App.Web.TimeControl.Forms.Default.CheckPerson()</a>.</p>
<div class="fragment"><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="keywordtype">int</span> count;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="keywordtype">string</span> clause = String.Format(<span class="stringliteral">&quot;{1} IN ({0}) &quot;</span>, <span class="keywordtype">id</span>, isRevers ? <span class="stringliteral">&quot;NOT&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keywordflow">if</span> (isNull)</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                clause = <span class="stringliteral">&quot;IS NULL&quot;</span>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordtype">string</span> sql = String.Format(<span class="stringliteral">@&quot;SELECT count(*) FROM [Инвентаризация].[dbo].[Сотрудники] (nolock) </span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="stringliteral">            WHERE КодЛицаЗаказчика {0} AND Сотрудник=&#39;{1}&#39;&quot;</span>, clause, fio);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            DataTable dt = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                count = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToInt32(dt.Rows[0][0]);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">catch</span> (Exception)</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                count = 0;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keywordflow">return</span> count &gt; 0;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
<div class="ttc" id="namespace_convert_html"><div class="ttname"><a href="../../de/db9/namespace_convert.html">Convert</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c2158750fcf8815f94544cdcccd6231"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c2158750fcf8815f94544cdcccd6231">&#9670;&nbsp;</a></span>CheckPersonByPositionId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Kesco.App.Web.TimeControl.Common.ExecQuery.CheckPersonByPositionId </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>idEmloyee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isRevers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isNull</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Проверка наличия сотрудника у должности </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Код должности</td></tr>
    <tr><td class="paramname">idEmloyee</td><td>сотрудник </td></tr>
    <tr><td class="paramname">isRevers</td><td>Признак реверса для должностей </td></tr>
    <tr><td class="paramname">isNull</td><td>Признак наименования компании - NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>да/нет</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DetailedException</td><td>SQL ошибка</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00200">200</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d65/_kesco_8_app_8_web_8_time_control_2_forms_2_default_8aspx_8cs_source.html#l01135">Kesco.App.Web.TimeControl.Forms.Default.CheckPersonByPosition()</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordtype">int</span> count;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="keywordtype">string</span> clause = String.Format(<span class="stringliteral">&quot;{1} IN ({0})&quot;</span>, <span class="keywordtype">id</span>, isRevers ? <span class="stringliteral">&quot;NOT&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">if</span> (isNull)</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                clause = <span class="stringliteral">&quot;IS NULL OR T1.Должность = &#39;&#39;&quot;</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="keywordtype">string</span> sql = String.Format(<span class="stringliteral">@&quot;SELECT count(*) FROM [Инвентаризация].[dbo].[Сотрудники] T0 (nolock)</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="stringliteral">            LEFT JOIN [Инвентаризация].[dbo].[vwДолжности] T1 ON T0.КодСотрудника = T1.КодСотрудника</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="stringliteral">            WHERE T1.Должность {0} AND T0.КодСотрудника={1}&quot;</span>, clause, idEmloyee);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            DataTable dt = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                count = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToInt32(dt.Rows[0][0]);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">catch</span> (Exception)</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                count = 0;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keywordflow">return</span> count &gt; 0;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
<div class="ttc" id="namespace_convert_html"><div class="ttname"><a href="../../de/db9/namespace_convert.html">Convert</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a44d64670c5117b066b29a05378db5546"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44d64670c5117b066b29a05378db5546">&#9670;&nbsp;</a></span>CheckPersonBySubdivisionId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Kesco.App.Web.TimeControl.Common.ExecQuery.CheckPersonBySubdivisionId </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>idEmloyee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isRevers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isNull</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Проверка наличия сотрудника у подразделения </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Код подразделения</td></tr>
    <tr><td class="paramname">idEmloyee</td><td>сотрудник </td></tr>
    <tr><td class="paramname">isRevers</td><td>Признак реверса для компаний </td></tr>
    <tr><td class="paramname">isNull</td><td>Признак наименования компании - NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>да/нет</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DetailedException</td><td>SQL ошибка</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00169">169</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d65/_kesco_8_app_8_web_8_time_control_2_forms_2_default_8aspx_8cs_source.html#l01119">Kesco.App.Web.TimeControl.Forms.Default.CheckPersonBySubdivision()</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keywordtype">int</span> count;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keywordtype">string</span> clause = String.Format(<span class="stringliteral">&quot;{1} IN ({0})&quot;</span>, <span class="keywordtype">id</span>, isRevers ? <span class="stringliteral">&quot;NOT&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keywordflow">if</span> (isNull)</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                clause = <span class="stringliteral">&quot;IS NULL OR T1.Подразделение = &#39;&#39;&quot;</span>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordtype">string</span> sql = String.Format(<span class="stringliteral">@&quot;SELECT count(*) FROM [Инвентаризация].[dbo].[Сотрудники] T0 (nolock)</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="stringliteral">            LEFT JOIN [Инвентаризация].[dbo].[vwДолжности] T1 ON T0.КодСотрудника = T1.КодСотрудника</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="stringliteral">            WHERE T1.Подразделение {0} AND T0.КодСотрудника={1}&quot;</span>, clause, idEmloyee);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            DataTable dt = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                count = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToInt32(dt.Rows[0][0]);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordflow">catch</span> (Exception)</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                count = 0;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">return</span> count &gt; 0;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
<div class="ttc" id="namespace_convert_html"><div class="ttname"><a href="../../de/db9/namespace_convert.html">Convert</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afac5d8a717195b7004a8a2427613516f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afac5d8a717195b7004a8a2427613516f">&#9670;&nbsp;</a></span>CheckPositionByCompanyId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Kesco.App.Web.TimeControl.Common.ExecQuery.CheckPositionByCompanyId </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isRevers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isNull</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Проверка наличия должности у компании </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Код компании</td></tr>
    <tr><td class="paramname">position</td><td>Должность </td></tr>
    <tr><td class="paramname">isRevers</td><td>Признак реверса для компаний </td></tr>
    <tr><td class="paramname">isNull</td><td>Признак наименования компании - NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>да/нет</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DetailedException</td><td>SQL ошибка</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00056">56</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d65/_kesco_8_app_8_web_8_time_control_2_forms_2_default_8aspx_8cs_source.html#l01069">Kesco.App.Web.TimeControl.Forms.Default.CheckPosition()</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <span class="keywordtype">int</span> count;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <span class="keywordtype">string</span> clause = String.Format(<span class="stringliteral">&quot;{1} IN ({0}) &quot;</span>, <span class="keywordtype">id</span>, isRevers ? <span class="stringliteral">&quot;NOT&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <span class="keywordflow">if</span> (isNull)</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                clause = <span class="stringliteral">&quot;IS NULL&quot;</span>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            <span class="keywordtype">string</span> sql = String.Format(<span class="stringliteral">@&quot;SELECT count(*) FROM [Инвентаризация].[dbo].[vwДолжности] (nolock) </span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="stringliteral">            WHERE КодЛица {0} AND Должность=&#39;{1}&#39;&quot;</span>, clause, position);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            DataTable dt = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                count = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToInt32(dt.Rows[0][0]);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <span class="keywordflow">catch</span> (Exception)</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                count = 0;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keywordflow">return</span> count &gt; 0;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
<div class="ttc" id="namespace_convert_html"><div class="ttname"><a href="../../de/db9/namespace_convert.html">Convert</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7648c4939ab86afb7bf018f8c352d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7648c4939ab86afb7bf018f8c352d7d">&#9670;&nbsp;</a></span>CheckPositionBySubdivisionId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Kesco.App.Web.TimeControl.Common.ExecQuery.CheckPositionBySubdivisionId </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isRevers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isNull</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Проверка наличия должности у подразделения </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Код подразделения</td></tr>
    <tr><td class="paramname">position</td><td>Должность </td></tr>
    <tr><td class="paramname">isRevers</td><td>Признак реверса для подразделений </td></tr>
    <tr><td class="paramname">isNull</td><td>Признак наименования компании - NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>да/нет</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DetailedException</td><td>SQL ошибка</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00086">86</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d65/_kesco_8_app_8_web_8_time_control_2_forms_2_default_8aspx_8cs_source.html#l01102">Kesco.App.Web.TimeControl.Forms.Default.CheckPositionBySubdivision()</a>.</p>
<div class="fragment"><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <span class="keywordtype">int</span> count;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <span class="keywordtype">string</span> clause = String.Format(<span class="stringliteral">&quot;P0.Подразделение {1} IN ({0}) &quot;</span>, <span class="keywordtype">id</span>, isRevers ? <span class="stringliteral">&quot;NOT&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="keywordflow">if</span> (isNull)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                clause = <span class="stringliteral">&quot;EXISTS (SELECT P0.КодДолжности FROM vwДолжности AS P0 WHERE (T0.L &gt;= P0.L AND T0.R &lt;= P0.R) AND (P0.Подразделение IS NULL OR P0.Подразделение = &#39;&#39;))&quot;</span>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <span class="keywordtype">string</span> sql = String.Format(<span class="stringliteral">@&quot;SELECT count(*) FROM [Инвентаризация].[dbo].[vwДолжности] t (nolock) </span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="stringliteral">            WHERE EXISTS (SELECT P0.КодДолжности FROM vwДолжности AS P0 (nolock) WHERE (t.L &gt;= P0.L AND t.R &lt;= P0.R) AND {0}) AND t.Должность=&#39;{1}&#39;&quot;</span>, clause, position);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            DataTable dt = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                count = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToInt32(dt.Rows[0][0]);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="keywordflow">catch</span> (Exception)</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                count = 0;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            }</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">return</span> count &gt; 0;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
<div class="ttc" id="namespace_convert_html"><div class="ttname"><a href="../../de/db9/namespace_convert.html">Convert</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acc87c2203fbea972f5820df1542fd77f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc87c2203fbea972f5820df1542fd77f">&#9670;&nbsp;</a></span>CheckSubdivisionByCompanyId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Kesco.App.Web.TimeControl.Common.ExecQuery.CheckSubdivisionByCompanyId </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>subdivision</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isRevers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isNull</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Проверка наличия подразделения у компании </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Код компании</td></tr>
    <tr><td class="paramname">subdivision</td><td>Подразделение </td></tr>
    <tr><td class="paramname">isRevers</td><td>Признак реверса для компаний </td></tr>
    <tr><td class="paramname">isNull</td><td>Признак наименования компании - NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>да/нет</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DetailedException</td><td>SQL ошибка</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00116">116</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d65/_kesco_8_app_8_web_8_time_control_2_forms_2_default_8aspx_8cs_source.html#l01052">Kesco.App.Web.TimeControl.Forms.Default.CheckSubdivision()</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="keywordtype">int</span> count;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="keywordtype">string</span> clause = String.Format(<span class="stringliteral">&quot;{1} IN ({0}) &quot;</span>, <span class="keywordtype">id</span>, isRevers ? <span class="stringliteral">&quot;NOT&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">if</span> (isNull)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                clause = <span class="stringliteral">&quot;IS NULL&quot;</span>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordtype">string</span> sql = String.Format(<span class="stringliteral">@&quot;SELECT count(*) FROM [Инвентаризация].[dbo].[vwДолжности] (nolock) </span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="stringliteral">            WHERE КодЛица {0} AND Подразделение=&#39;{1}&#39;&quot;</span>, clause, subdivision);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            DataTable dt = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                count = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToInt32(dt.Rows[0][0]);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">catch</span> (Exception)</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                count = 0;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <span class="keywordflow">return</span> count &gt; 0;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
<div class="ttc" id="namespace_convert_html"><div class="ttname"><a href="../../de/db9/namespace_convert.html">Convert</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a456884c31efe9004d28ad69125ee3862"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a456884c31efe9004d28ad69125ee3862">&#9670;&nbsp;</a></span>CompleteEmployeePeriodsInfoDs() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/dc6/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds.html">EmployeePeriodsInfoDs</a> Kesco.App.Web.TimeControl.Common.ExecQuery.CompleteEmployeePeriodsInfoDs </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>emplName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>companyInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>postInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>divisionInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>startDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>endDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isRusLocal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>activeTimeExit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>tm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>isReversCompany</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>isReversSubdivision</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>isReversPosition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>isReversPerson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>subEmpl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Получение проходов сотрудника </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">emplName</td><td></td></tr>
    <tr><td class="paramname">companyInfo</td><td></td></tr>
    <tr><td class="paramname">postInfo</td><td></td></tr>
    <tr><td class="paramname">divisionInfo</td><td></td></tr>
    <tr><td class="paramname">startDate</td><td></td></tr>
    <tr><td class="paramname">endDate</td><td></td></tr>
    <tr><td class="paramname">isRusLocal</td><td></td></tr>
    <tr><td class="paramname">tz</td><td></td></tr>
    <tr><td class="paramname">activeTimeExit</td><td></td></tr>
    <tr><td class="paramname">tm</td><td></td></tr>
    <tr><td class="paramname">active</td><td></td></tr>
    <tr><td class="paramname">isReversCompany</td><td></td></tr>
    <tr><td class="paramname">isReversSubdivision</td><td></td></tr>
    <tr><td class="paramname">isReversPosition</td><td></td></tr>
    <tr><td class="paramname">isReversPerson</td><td></td></tr>
    <tr><td class="paramname">subEmpl</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd></dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00272">272</a></p>

<p class="reference">Используется в <a class="el" href="../../da/dd1/_days_table_cash_8cs_source.html#l00118">Kesco.App.Web.TimeControl.Common.DaysTableCash.CompleteDaysTable()</a> и <a class="el" href="../../d9/d95/_empl_table_cash_8cs_source.html#l00103">Kesco.App.Web.TimeControl.Common.EmplTableCash.CompleteEmplTable()</a>.</p>
<div class="fragment"><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordtype">bool</span> activeTimeExitVerify = startDate.Equals(endDate);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordtype">string</span> sStartDate = startDate.ToString(<span class="stringliteral">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="keywordtype">string</span> sEndDate = endDate.AddDays(1).ToString(<span class="stringliteral">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keywordtype">string</span> timeExitRestriction = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keywordtype">string</span> timeExitLocation = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="keywordtype">int</span> clauseCompany = 0;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordtype">int</span> clauseSubdivision = 0;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordtype">int</span> clausePosition = 0;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordtype">int</span> clausePerson = 0;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keywordflow">if</span> (isReversCompany == <span class="stringliteral">&quot;1&quot;</span>)</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                clauseCompany = 1;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isReversCompany == <span class="stringliteral">&quot;3&quot;</span>)</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                clauseCompany = 2;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isReversCompany == <span class="stringliteral">&quot;2&quot;</span>)</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                clauseCompany = 3;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keywordflow">if</span> (isReversSubdivision == <span class="stringliteral">&quot;1&quot;</span>)</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                clauseSubdivision = 1;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isReversSubdivision == <span class="stringliteral">&quot;3&quot;</span>)</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                clauseSubdivision = 2;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isReversSubdivision == <span class="stringliteral">&quot;2&quot;</span>)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                clauseSubdivision = 3;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">if</span> (isReversPosition == <span class="stringliteral">&quot;1&quot;</span>)</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                clausePosition = 1;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isReversPosition == <span class="stringliteral">&quot;3&quot;</span>)</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                clausePosition = 2;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isReversPosition == <span class="stringliteral">&quot;2&quot;</span>)</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                clausePosition = 3;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">if</span> (isReversPerson == <span class="stringliteral">&quot;1&quot;</span>)</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                clausePerson = 1;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isReversPerson == <span class="stringliteral">&quot;3&quot;</span>)</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                clausePerson = 2;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isReversPerson == <span class="stringliteral">&quot;2&quot;</span>)</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                clausePerson = 3;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">if</span> (activeTimeExitVerify &amp;&amp; activeTimeExit)</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                timeExitLocation = <span class="stringliteral">@&quot; </span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="stringliteral"> AND TE0.КодРасположения IS NULL&quot;</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <span class="keywordtype">string</span> sTimeExit = tm.ToString(<span class="stringliteral">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                timeExitRestriction = String.Format(<span class="stringliteral">@&quot;</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="stringliteral"> AND NOT EXISTS(SELECT * FROM vwПроходыСотрудников TE1 (nolock) </span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="stringliteral">                                WHERE TE0.КодСотрудника = TE1.КодСотрудника </span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="stringliteral">                                        AND Dateadd(MINUTE,{1},TE1.[Когда]) &gt; Dateadd(MINUTE,{1},TE0.[Когда])</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="stringliteral">                                        AND Dateadd(MINUTE,{1},TE1.[Когда]) &lt; CONVERT(datetime, &#39;{0}&#39;, 120))&quot;</span>, sEndDate, tz);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                sEndDate = sTimeExit;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            var result = <span class="keyword">new</span> <a class="code" href="../../d0/dc6/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds.html">EmployeePeriodsInfoDs</a>();</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="keywordtype">string</span> additionalInnerJoin = String.Empty;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keywordtype">string</span> additionalRestrictions = String.Empty;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordtype">string</span> additionalRestrictionsCr = String.Empty;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <span class="keywordflow">if</span> (!emplName.Equals(String.Empty) &amp;&amp; clausePerson != 2)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                additionalRestrictions = String.Format(<span class="stringliteral">&quot; AND T0.КодСотрудника {1} IN ({0})&quot;</span>, emplName, clausePerson == 1 ? <span class="stringliteral">&quot;NOT&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">if</span> (clausePerson == 2)</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                additionalRestrictions = <span class="stringliteral">&quot; AND T0.КодСотрудника IS NULL&quot;</span>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="keywordflow">if</span> (!postInfo.Equals(String.Empty) || !divisionInfo.Equals(String.Empty) || !companyInfo.Equals(String.Empty) || clausePosition == 2 || clauseSubdivision == 2 || clauseCompany == 2</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                || clausePosition == 3 || clauseSubdivision == 3 || clauseCompany == 3)</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                additionalInnerJoin = <span class="stringliteral">&quot; LEFT JOIN vwДолжности AS T1 ON (T0.КодСотрудника = T1.КодСотрудника)&quot;</span>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="keywordflow">if</span> (!postInfo.Equals(String.Empty) &amp;&amp; clausePosition != 2 &amp;&amp; clausePosition != 3)</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                additionalRestrictions += String.Format(<span class="stringliteral">&quot; AND T1.Должность {1} IN ({0})&quot;</span>, postInfo, clausePosition == 1 ? <span class="stringliteral">&quot;NOT&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordflow">if</span> (clausePosition == 2)</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                additionalRestrictions += <span class="stringliteral">&quot; AND (T1.Должность IS NULL OR T1.Должность = &#39;&#39;)&quot;</span>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keywordflow">if</span> (clausePosition == 3)</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                additionalRestrictions += <span class="stringliteral">&quot; AND (T1.Должность IS NOT NULL AND T1.Должность &lt;&gt; &#39;&#39;)&quot;</span>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <span class="keywordflow">if</span> (!divisionInfo.Equals(String.Empty) &amp;&amp; clauseSubdivision != 2 &amp;&amp; clauseSubdivision != 3)</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                additionalRestrictions += String.Format(<span class="stringliteral">&quot; AND EXISTS (SELECT P0.КодДолжности FROM vwДолжности AS P0 WHERE (T1.L &gt;= P0.L AND T1.R &lt;= P0.R) AND P0.Подразделение {1} IN ({0}))&quot;</span>,</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                    divisionInfo, clauseSubdivision == 1 ? <span class="stringliteral">&quot;NOT&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">if</span> (clauseSubdivision == 2)</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                additionalRestrictions += <span class="stringliteral">&quot; AND EXISTS (SELECT P0.КодДолжности FROM vwДолжности AS P0 WHERE (T1.L &gt;= P0.L AND T1.R &lt;= P0.R) AND (P0.Подразделение IS NULL OR P0.Подразделение = &#39;&#39;))&quot;</span>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keywordflow">if</span> (clauseSubdivision == 3)</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                additionalRestrictions += <span class="stringliteral">&quot; AND EXISTS (SELECT P0.КодДолжности FROM vwДолжности AS P0 WHERE (T1.L &gt;= P0.L AND T1.R &lt;= P0.R) AND (P0.Подразделение IS NOT NULL AND P0.Подразделение &lt;&gt; &#39;&#39;))&quot;</span>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">if</span> (!companyInfo.Equals(String.Empty) &amp;&amp; clauseCompany != 2)</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                <span class="comment">//additionalRestrictions += String.Format(&quot; AND (T1.КодЛица {1} IN ({0}) {2} T0.КодЛицаЗаказчика {1} IN ({0}))&quot;, companyInfo, clauseCompany == 1 ? &quot;NOT&quot; : &quot;&quot;, clauseCompany == 1 ? &quot;and&quot; : &quot;or&quot;);</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                additionalRestrictions += String.Format(<span class="stringliteral">&quot; AND T0.КодЛицаЗаказчика {1} IN ({0})&quot;</span>, companyInfo, clauseCompany == 1 ? <span class="stringliteral">&quot;NOT&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="keywordflow">if</span> (clauseCompany == 2)</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                <span class="comment">//additionalRestrictions += &quot; AND (T1.КодЛица IS NULL OR T0.КодЛицаЗаказчика IS NULL)&quot;;</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                additionalRestrictions += <span class="stringliteral">&quot; AND T0.КодЛицаЗаказчика IS NULL&quot;</span>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordtype">string</span> dateRestriction = <span class="keywordtype">string</span>.Format(<span class="stringliteral">&quot; Dateadd(MINUTE,{2},TE0.[Когда]) &gt; CONVERT(datetime, &#39;{0}&#39;, 120) AND Dateadd(MINUTE,{2},TE0.[Когда]) &lt; CONVERT(datetime, &#39;{1}&#39;, 120)&quot;</span>, </div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                sStartDate, sEndDate, tz);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">string</span> queryEmplTempl = <span class="stringliteral">@&quot;</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="stringliteral">SELECT T0.КодСотрудника{0}</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="stringliteral">FROM Сотрудники AS T0 {1}</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="stringliteral">WHERE T0.КодСотрудника IN (SELECT TE0.КодСотрудника FROM vwПроходыСотрудников TE0 (nolock) WHERE {5} {6} {4}){2}{3}&quot;</span>;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="keywordtype">string</span> personWhere = String.Format(<span class="stringliteral">@&quot;</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="stringliteral">WHERE (T0.КодСотрудника IN (SELECT TE0.КодСотрудника FROM vwПроходыСотрудников TE0 (nolock)</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="stringliteral">WHERE DATEADD(minute, {0}, TE0.[Когда]) &gt;= CONVERT(datetime, &#39;{1}&#39;, 120) AND DATEADD(minute, {0}, TE0.[Когда]) &lt;= CONVERT(datetime, &#39;{2}&#39;, 120)&quot;</span>, tz, sStartDate, sEndDate);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="comment">//string personActive = active ? &quot;&quot; : &quot; OR T0.КодСотрудника IN (SELECT КодСотрудника FROM vwСотрудникиИмеющиеДолжностиИлиКарточки)&quot;;</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keywordtype">string</span> personActive = active ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">@&quot; OR T0.КодСотрудника IN (SELECT КодСотрудника FROM(SELECT КодСотрудника FROM vwДолжности WHERE КодСотрудника IS NOT NULL </span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="stringliteral">        UNION SELECT КодСотрудника FROM КарточкиСотрудников) X</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="stringliteral">WHERE КодСотрудника IN (SELECT КодСотрудника FROM vwПодчинённые) </span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="stringliteral">    OR EXISTS (SELECT * FROM dbo.fn_ТекущиеРоли() Y </span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="stringliteral">            WHERE КодРоли IN(31,32,33) AND (КодЛица = 0 OR КодЛица IN(SELECT КодЛица FROM vwДолжности UNION SELECT КодЛицаЗаказчика FROM Сотрудники))))&quot;</span>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="comment">//string personSubEmpl = !subEmpl ? &quot;&quot; : @&quot; OR T0.КодСотрудника IN (SELECT КодСотрудника FROM vwПодчинённые)&quot;;</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordtype">string</span> startAddFilter = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="keywordtype">string</span> endAddFilter = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordflow">if</span> (subEmpl &amp;&amp; (!String.IsNullOrEmpty(divisionInfo) || !String.IsNullOrEmpty(postInfo) || !String.IsNullOrEmpty(emplName)))</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                startAddFilter = <span class="stringliteral">&quot; OR (&quot;</span>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                endAddFilter = <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordtype">string</span> divisionInfoSubEmpl = (!subEmpl || String.IsNullOrEmpty(divisionInfo)) ? <span class="stringliteral">&quot;&quot;</span> : String.Format(<span class="stringliteral">@&quot;T0.КодСотрудника IN (SELECT DISTINCT Должности.КодСотрудника</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="stringliteral">FROM    dbo.vwДолжности Chief </span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="stringliteral">INNER JOIN dbo.vwДолжности Должности ON Chief.L &lt;= Должности.L AND Chief.R &gt;= Должности.R</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="stringliteral">WHERE   Должности.КодСотрудника IS NOT NULL AND</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="stringliteral">    Chief.КодДолжности IN</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="stringliteral">    (</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="stringliteral">        SELECT  КодДолжности</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="stringliteral">        FROM    dbo.vwДолжности</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="stringliteral">        WHERE   Подразделение IN ({0})</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="stringliteral">        UNION</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="stringliteral">        SELECT  Slave.КодДолжности</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="stringliteral">        FROM    dbo.ПодчинениеАдминистративное Chief INNER JOIN</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="stringliteral">            dbo.ПодчинениеАдминистративное Slave ON Chief.L &lt; Slave.L AND Chief.R &gt; Slave.R INNER JOIN</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="stringliteral">            dbo.vwДолжности ON Chief.КодДолжности = dbo.vwДолжности.КодДолжности</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="stringliteral">        WHERE   Подразделение IN ({0})      </span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="stringliteral">    ))&quot;</span>, divisionInfo);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <span class="keywordtype">string</span> startdivisionFilter = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="keywordflow">if</span> (subEmpl &amp;&amp; !String.IsNullOrEmpty(divisionInfo))</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                startdivisionFilter = <span class="stringliteral">&quot; AND &quot;</span>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="keywordtype">string</span> postInfoSubEmpl = (!subEmpl || String.IsNullOrEmpty(postInfo)) ? <span class="stringliteral">&quot;&quot;</span> : String.Format(<span class="stringliteral">@&quot;{1}T0.КодСотрудника IN (SELECT DISTINCT Должности.КодСотрудника</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="stringliteral">FROM    dbo.vwДолжности Chief </span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="stringliteral">INNER JOIN dbo.vwДолжности Должности ON Chief.L &lt;= Должности.L AND Chief.R &gt;= Должности.R</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="stringliteral">WHERE   Должности.КодСотрудника IS NOT NULL AND</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="stringliteral">    Chief.КодДолжности IN</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="stringliteral">    (</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="stringliteral">        SELECT  КодДолжности</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="stringliteral">        FROM    dbo.vwДолжности</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="stringliteral">        WHERE   Должность IN ({0})</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="stringliteral">        UNION</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="stringliteral">        SELECT  Slave.КодДолжности</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="stringliteral">        FROM    dbo.ПодчинениеАдминистративное Chief INNER JOIN</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="stringliteral">            dbo.ПодчинениеАдминистративное Slave ON Chief.L &lt; Slave.L AND Chief.R &gt; Slave.R INNER JOIN</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="stringliteral">            dbo.vwДолжности ON Chief.КодДолжности = dbo.vwДолжности.КодДолжности</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="stringliteral">        WHERE   Должность IN ({0})</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="stringliteral">        </span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="stringliteral">    ))&quot;</span>, postInfo, startdivisionFilter);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <span class="keywordtype">string</span> startpostFilter = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">if</span> (subEmpl &amp;&amp; (!String.IsNullOrEmpty(divisionInfo) || !String.IsNullOrEmpty(postInfo)))</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                startpostFilter = <span class="stringliteral">&quot; AND &quot;</span>;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="keywordtype">string</span> personSubEmpl = (!subEmpl || String.IsNullOrEmpty(emplName)) ? <span class="stringliteral">&quot;&quot;</span> : String.Format(<span class="stringliteral">@&quot;{1}T0.КодСотрудника IN (SELECT DISTINCT Должности.КодСотрудника</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="stringliteral">FROM    dbo.vwДолжности Chief </span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="stringliteral">INNER JOIN dbo.vwДолжности Должности ON Chief.L &lt;= Должности.L AND Chief.R &gt;= Должности.R</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="stringliteral">WHERE   Должности.КодСотрудника IS NOT NULL AND</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="stringliteral">    Chief.КодДолжности IN</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="stringliteral">    (</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="stringliteral">        SELECT  КодДолжности</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="stringliteral">        FROM    dbo.vwДолжности</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="stringliteral">        WHERE   КодСотрудника IN ({0})</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="stringliteral">        UNION</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="stringliteral">        SELECT  Slave.КодДолжности</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="stringliteral">        FROM    dbo.ПодчинениеАдминистративное Chief INNER JOIN</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="stringliteral">            dbo.ПодчинениеАдминистративное Slave ON Chief.L &lt; Slave.L AND Chief.R &gt; Slave.R INNER JOIN</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="stringliteral">            dbo.vwДолжности ON Chief.КодДолжности = dbo.vwДолжности.КодДолжности</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="stringliteral">        WHERE   КодСотрудника IN ({0})</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="stringliteral">        </span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="stringliteral">    ))&quot;</span>, emplName, startpostFilter);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordtype">string</span> personSearch = String.Format(<span class="stringliteral">@&quot;SELECT DISTINCT T0.КодСотрудника, CONVERT(varchar, COALESCE(T0.КодЛица, -1)) КодЛица, T0.Сотрудник, T0.Employee FROM Сотрудники T0</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="stringliteral">{0}{1}{2}{3}){4}){5}{9}{6}{7}{8}{10}</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="stringliteral">ORDER BY T0.Сотрудник&quot;</span>, additionalInnerJoin, personWhere, timeExitLocation, timeExitRestriction, personActive, additionalRestrictions,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                      divisionInfoSubEmpl, postInfoSubEmpl, personSubEmpl, startAddFilter, endAddFilter);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">//            string entranceQuery = @&quot;</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">//SELECT TE0.КодПроходаСотрудника, TE0.КодСотрудника, Dateadd(MINUTE,&quot; + tz + @&quot;,TE0.[Когда]) Когда, TE0.КодРасположения </span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">//FROM vwПроходыСотрудников AS TE0 (nolock) WHERE КодСотрудника IN (&quot;</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">//                + string.Format(queryEmplTempl, &quot;&quot;, additionalInnerJoin, additionalRestrictionsCr, additionalRestrictions, timeExitRestriction, dateRestriction, timeExitLocation) + &quot;)&quot;;</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="keywordtype">string</span> entranceQuery = <span class="stringliteral">@&quot;</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="stringliteral">SELECT TE0.КодПроходаСотрудника, TE0.КодСотрудника, Dateadd(MINUTE,&quot;</span> + tz + <span class="stringliteral">@&quot;,TE0.[Когда]) Когда, TE0.КодРасположения </span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="stringliteral">FROM vwПроходыСотрудников AS TE0 (nolock) WHERE КодСотрудника IN (&quot;</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                + <span class="keywordtype">string</span>.Format(queryEmplTempl, <span class="stringliteral">&quot;&quot;</span>, additionalInnerJoin, additionalRestrictionsCr, additionalRestrictions, timeExitRestriction, dateRestriction, timeExitLocation) +</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                String.Format(<span class="stringliteral">&quot;{0}{1}{2}{3}{4})&quot;</span>, startAddFilter, divisionInfoSubEmpl, postInfoSubEmpl, personSubEmpl, endAddFilter);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <span class="comment">//var args = new Dictionary&lt;string, object&gt;();</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <span class="comment">//args.Add(&quot;@ОтображатьВсех&quot;, active ? 0 : 1);</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            <span class="comment">//args.Add(&quot;@УшедшиеДо&quot;, !(activeTimeExitVerify &amp;&amp; activeTimeExit) ? 0 : 1);</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="comment">//args.Add(&quot;@ДатаНачала&quot;, startDate);</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <span class="comment">//args.Add(&quot;@ДатаКонца&quot;, Convert.ToDateTime(sEndDate));//endDate.AddDays(1));</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="comment">//args.Add(&quot;@ТаймЗона&quot;, tz);</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="comment">//args.Add(&quot;@ФИО&quot;, emplName);</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="comment">//args.Add(&quot;@Должность&quot;, postInfo);</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="comment">//args.Add(&quot;@Подразделение&quot;, divisionInfo);</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="comment">//args.Add(&quot;@КодЛица&quot;, companyInfo);</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="comment">//args.Add(&quot;@РеверсКомпаний&quot;, clauseCompany);</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <span class="comment">//args.Add(&quot;@РеверсПодразделений&quot;, clauseSubdivision);</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="comment">//args.Add(&quot;@РеверсДолжностей&quot;, clausePosition);</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="comment">//args.Add(&quot;@РеверсСотрудников&quot;, clausePerson);</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <span class="comment">//DataTable dt1 = DBManager.GetData(&quot;sp_УчетРабочегоВремени_Поиск&quot;, Global.ConnectionString, CommandType.StoredProcedure, args);</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            DataTable dt1 = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(personSearch, Global.ConnectionString);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            result.Сотрудники.Clear();</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            result.Сотрудники.Merge(dt1);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            DataTable dt2 = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(entranceQuery, Global.ConnectionString);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            result.ПроходыСотрудников.Clear();</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            result.ПроходыСотрудников.Merge(dt2);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds_html"><div class="ttname"><a href="../../d0/dc6/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds.html">Kesco.App.Web.TimeControl.DataSets.EmployeePeriodsInfoDs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d48/_employee_periods_info_ds_8cs_source.html#l00023">EmployeePeriodsInfoDs.cs:23</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a90c73fa2ef4032adad1ba800f6f17d99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90c73fa2ef4032adad1ba800f6f17d99">&#9670;&nbsp;</a></span>CompleteEmployeePeriodsInfoDs() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/dc6/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds.html">EmployeePeriodsInfoDs</a> Kesco.App.Web.TimeControl.Common.ExecQuery.CompleteEmployeePeriodsInfoDs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>emplId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>startDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>endDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Получение проходов сотрудника </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">emplId</td><td></td></tr>
    <tr><td class="paramname">startDate</td><td></td></tr>
    <tr><td class="paramname">endDate</td><td></td></tr>
    <tr><td class="paramname">tz</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd></dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00518">518</a></p>
<div class="fragment"><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <span class="keywordtype">string</span> sStartDate = startDate.AddDays(-1).ToString(<span class="stringliteral">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <span class="keywordtype">string</span> sEndDate = endDate.AddDays(2).ToString(<span class="stringliteral">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            var result = <span class="keyword">new</span> <a class="code" href="../../d0/dc6/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds.html">EmployeePeriodsInfoDs</a>();</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="keywordtype">string</span> sql = String.Format(<span class="stringliteral">&quot;SELECT КодСотрудника, Сотрудник, Employee FROM Сотрудники WHERE КодСотрудника = {0}&quot;</span>, emplId);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            DataTable dt1 = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            result.Сотрудники.Clear();</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            result.Сотрудники.Merge(dt1);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;SELECT КодПроходаСотрудника, КодСотрудника, Dateadd(MINUTE,{2},[Когда]) Когда, КодРасположения FROM vwПроходыСотрудников (nolock) </span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="stringliteral">WHERE (КодСотрудника = {3}) AND (Dateadd(MINUTE,{2},[Когда]) &gt;= convert(datetime, &#39;{0}&#39;, 120)) AND (Dateadd(MINUTE,{2},[Когда]) &lt;= convert(datetime, &#39;{1}&#39;, 120))&quot;</span>, sStartDate, sEndDate, tz, emplId);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            DataTable dt2 = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            result.ПроходыСотрудников.Clear();</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            result.ПроходыСотрудников.Merge(dt2);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds_html"><div class="ttname"><a href="../../d0/dc6/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds.html">Kesco.App.Web.TimeControl.DataSets.EmployeePeriodsInfoDs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d48/_employee_periods_info_ds_8cs_source.html#l00023">EmployeePeriodsInfoDs.cs:23</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aded2cba6d1da2a45f94ce414d7a094a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aded2cba6d1da2a45f94ce414d7a094a6">&#9670;&nbsp;</a></span>CompleteEmployeePeriodsInfoDs() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/dc6/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds.html">EmployeePeriodsInfoDs</a> Kesco.App.Web.TimeControl.Common.ExecQuery.CompleteEmployeePeriodsInfoDs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>emplId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>startDateP1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>endDateP1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>startDateP2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>endDateP2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Получение проходов сотрудника </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">emplId</td><td></td></tr>
    <tr><td class="paramname">startDateP1</td><td></td></tr>
    <tr><td class="paramname">endDateP1</td><td></td></tr>
    <tr><td class="paramname">startDateP2</td><td></td></tr>
    <tr><td class="paramname">endDateP2</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd></dd></dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00548">548</a></p>
<div class="fragment"><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        {</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="keywordtype">string</span> sStartDateP1 = startDateP1.ToString(<span class="stringliteral">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="keywordtype">string</span> sEndDateP1 = endDateP1.ToString(<span class="stringliteral">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordtype">string</span> sStartDateP2 = startDateP2.ToString(<span class="stringliteral">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <span class="keywordtype">string</span> sEndDateP2 = endDateP2.ToString(<span class="stringliteral">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            var result = <span class="keyword">new</span> <a class="code" href="../../d0/dc6/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds.html">EmployeePeriodsInfoDs</a>();</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            <span class="keywordtype">string</span> sql = String.Format(<span class="stringliteral">&quot;SELECT КодСотрудника, Сотрудник, Employee FROM Сотрудники WHERE КодСотрудника = {0}&quot;</span>, emplId);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            DataTable dt1 = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            result.Сотрудники.Clear();</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            result.Сотрудники.Merge(dt1);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="stringliteral">SELECT КодПроходаСотрудника, КодСотрудника, Когда, КодРасположения</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="stringliteral">FROM vwПроходыСотрудников (nolock)</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="stringliteral">WHERE (КодСотрудника = {4}) AND ((Когда &gt;= convert(datetime, &#39;{0}&#39;, 120) AND Когда &lt;= convert(datetime, &#39;{1}&#39;, 120))</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="stringliteral">    OR (Когда &gt;= convert(datetime, &#39;{2}&#39;, 120) AND Когда &lt;= convert(datetime, &#39;{3}&#39;, 120)))&quot;</span>, sStartDateP1, sEndDateP1, sStartDateP2, sEndDateP2, emplId);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            DataTable dt2 = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            result.ПроходыСотрудников.Clear();</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            result.ПроходыСотрудников.Merge(dt2);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds_html"><div class="ttname"><a href="../../d0/dc6/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_data_sets_1_1_employee_periods_info_ds.html">Kesco.App.Web.TimeControl.DataSets.EmployeePeriodsInfoDs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d48/_employee_periods_info_ds_8cs_source.html#l00023">EmployeePeriodsInfoDs.cs:23</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0fb5aabdedf2a086076136bb7ab53310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fb5aabdedf2a086076136bb7ab53310">&#9670;&nbsp;</a></span>Deserialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">object Kesco.App.Web.TimeControl.Common.ExecQuery.Deserialize </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Type&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00796">796</a></p>
<div class="fragment"><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <span class="keywordtype">object</span> result;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            var xs = <span class="keyword">new</span> XmlSerializer(t);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="keyword">using</span> (TextReader reader = <span class="keyword">new</span> StringReader(source))</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                result = xs.Deserialize(reader);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        }</div></div><!-- fragment -->
</div>
</div>
<a id="a7761a4f06f2159cd9e45c3f57e244e09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7761a4f06f2159cd9e45c3f57e244e09">&#9670;&nbsp;</a></span>GetCardPersonById()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/db8/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_card_person.html">CardPerson</a> Kesco.App.Web.TimeControl.Common.ExecQuery.GetCardPersonById </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Получение сотрудника по ID </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Код сотрудника</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>CardPerson</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DetailedException</td><td>SQL ошибка</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00030">30</a></p>

<p class="reference">Используется в <a class="el" href="../../d7/d2d/_time_details_form_8aspx_8cs_source.html#l00142">Kesco.App.Web.TimeControl.Forms.TimeDetailsForm.SetProperty()</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        {</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            <span class="keywordtype">string</span> sql = String.Format(<span class="stringliteral">@&quot;SELECT * FROM [Инвентаризация].[dbo].[Сотрудники] (nolock) WHERE КодСотрудника={0}&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;            DataTable dt = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            <span class="keywordflow">return</span> dt.AsEnumerable().Select(dr =&gt; <span class="keyword">new</span> <a class="code" href="../../d6/db8/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_card_person.html">CardPerson</a></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;            {</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                CodeEmpl = dr.Field&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;КодСотрудника&quot;</span>),</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                CodePerson = dr.Field&lt;<span class="keywordtype">int</span>?&gt;(<span class="stringliteral">&quot;КодЛица&quot;</span>),</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                FIO = dr.Field&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;Сотрудник&quot;</span>),</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                FIOshort = dr.Field&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;ФИО&quot;</span>),</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                FIOshortLat = dr.Field&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;FIO&quot;</span>),</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                Employee = dr.Field&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;Employee&quot;</span>),</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                ChangeBy = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToInt32(dr.Field&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;Изменил&quot;</span>)),</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                ChangeDate = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToDateTime(dr.Field&lt;DateTime&gt;(<span class="stringliteral">&quot;Изменено&quot;</span>))</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            }).FirstOrDefault();</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_card_person_html"><div class="ttname"><a href="../../d6/db8/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_card_person.html">Kesco.App.Web.TimeControl.Entities.CardPerson</a></div><div class="ttdoc">Бизнес-объект - сотрудник </div><div class="ttdef"><b>Definition:</b> <a href="../../da/de2/_card_person_8cs_source.html#l00009">CardPerson.cs:9</a></div></div>
<div class="ttc" id="namespace_convert_html"><div class="ttname"><a href="../../de/db9/namespace_convert.html">Convert</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a774af469bdbc214b8b33a8c93290e01f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a774af469bdbc214b8b33a8c93290e01f">&#9670;&nbsp;</a></span>GetCompanyBySubdivision()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">List&lt;<a class="el" href="../../dd/d88/class_kesco_1_1_lib_1_1_entities_1_1_persons_1_1_person_customer.html">PersonCustomer</a>&gt; Kesco.App.Web.TimeControl.Common.ExecQuery.GetCompanyBySubdivision </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>subdivision</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Получение списка компаний по подразделению </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">subdivision</td><td>Подразделение</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>Список компаний</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DetailedException</td><td>SQL ошибка</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00143">143</a></p>

<p class="reference">Используется в <a class="el" href="../../d7/d84/_company_list_8aspx_8cs_source.html#l00049">Kesco.App.Web.TimeControl.Forms.CompanyList.RenderData()</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="keywordtype">string</span> sql = String.Format(<span class="stringliteral">@&quot;SELECT t1.КодЛица, t2.Кличка, t2.КраткоеНазваниеЛат</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="stringliteral">FROM [Инвентаризация].[dbo].[vwДолжности] t1 (nolock) </span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="stringliteral">JOIN [Инвентаризация].[dbo].[ЛицаЗаказчики] t2 ON t1.КодЛица = t2.КодЛица</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="stringliteral">WHERE t1.Подразделение=&#39;{0}&#39;</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="stringliteral">ORDER BY t2.Кличка&quot;</span>, subdivision);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            DataTable dt = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            List&lt;PersonCustomer&gt;  result = dt.AsEnumerable().Select(dr =&gt; <span class="keyword">new</span> <a class="code" href="../../dd/d88/class_kesco_1_1_lib_1_1_entities_1_1_persons_1_1_person_customer.html">PersonCustomer</a></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                Id = dr.Field&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;КодЛица&quot;</span>).ToString(CultureInfo.InvariantCulture),</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                Name = dr.Field&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;Кличка&quot;</span>),</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                NameLat = dr.Field&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;КраткоеНазваниеЛат&quot;</span>)</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            }).ToList();</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_entities_1_1_persons_1_1_person_customer_html"><div class="ttname"><a href="../../dd/d88/class_kesco_1_1_lib_1_1_entities_1_1_persons_1_1_person_customer.html">Kesco.Lib.Entities.Persons.PersonCustomer</a></div><div class="ttdoc">Класс сущности Лица заказчики </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dbd/_persons_2_person_customer_8cs_source.html#l00013">PersonCustomer.cs:13</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa9d7ab9e34d1ea9b0893528cffe44dfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9d7ab9e34d1ea9b0893528cffe44dfa">&#9670;&nbsp;</a></span>GetPersonIdByEmployeeId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string Kesco.App.Web.TimeControl.Common.ExecQuery.GetPersonIdByEmployeeId </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Получение кода сотрудника по коду лица </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Код лица</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>код сотрудника</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DetailedException</td><td>SQL ошибка</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00766">766</a></p>

<p class="reference">Используется в <a class="el" href="../../de/d65/_kesco_8_app_8_web_8_time_control_2_forms_2_default_8aspx_8cs_source.html#l00220">Kesco.App.Web.TimeControl.Forms.Default.RedirectToDetails()</a> и <a class="el" href="../../d2/ded/_empl_days_details_form_8aspx_8cs_source.html#l00552">Kesco.App.Web.TimeControl.Forms.EmplDaysDetailsForm.SetProperty()</a>.</p>
<div class="fragment"><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            <span class="keywordtype">string</span> sql = String.Format(<span class="stringliteral">@&quot;SELECT КодЛица FROM [Инвентаризация].[dbo].[Сотрудники] (nolock) </span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="stringliteral">            WHERE КодСотрудника = {0}&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            DataTable dt = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <span class="keywordflow">if</span> (dt == null || dt.Rows.Count == 0) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="keywordflow">return</span> dt.Rows[0][0].ToString();</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a389b11353c5f80eec13f3f1088e90126"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a389b11353c5f80eec13f3f1088e90126">&#9670;&nbsp;</a></span>GetSettings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html">Filter</a> Kesco.App.Web.TimeControl.Common.ExecQuery.GetSettings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html">Filter</a>&#160;</td>
          <td class="paramname"><em>filter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Получение настроек пользователя </p>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DetailedException</td><td>SQL ошибка</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00674">674</a></p>

<p class="reference">Используется в <a class="el" href="../../d7/d2d/_time_details_form_8aspx_8cs_source.html#l00115">Kesco.App.Web.TimeControl.Forms.TimeDetailsForm.GetParams()</a>, <a class="el" href="../../d2/ded/_empl_days_details_form_8aspx_8cs_source.html#l00571">Kesco.App.Web.TimeControl.Forms.EmplDaysDetailsForm.GetParams()</a> и <a class="el" href="../../de/d65/_kesco_8_app_8_web_8_time_control_2_forms_2_default_8aspx_8cs_source.html#l00942">Kesco.App.Web.TimeControl.Forms.Default.GetParams()</a>.</p>
<div class="fragment"><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            <span class="keywordtype">string</span> sql = String.Format(<span class="stringliteral">&quot;Select * from vwНастройки Where [КодНастройкиКлиента] = {0} and [Параметр] Like &#39;TC_%&#39;&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            DataTable dt = <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="keywordflow">if</span> (dt == null || dt.Rows.Count == 0) <span class="keywordflow">return</span> filter;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            <span class="keywordflow">foreach</span> (DataRow row <span class="keywordflow">in</span> dt.Rows)</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                <span class="keywordflow">if</span> (String.IsNullOrEmpty(row.ItemArray[2].ToString())) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_emplrowsperpage&quot;</span>)</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                    filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a518d7c22bc8141b346680db90f3fd500">RowsPerPage</a> = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToInt32(row.ItemArray[2]);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_detailrows&quot;</span>)</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                    filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a065717f6a67731e21a0327fccd95f55f">RowsPerPageDetails</a> = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToInt32(row.ItemArray[2]);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_detailnoempty&quot;</span>)</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                    filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a1bf0aac7a15a94d312ac5728e813f799">IsDetailNoEmpty</a> = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToBoolean(row.ItemArray[2]);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_employeeprimary&quot;</span>)</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                    filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a21e1eafb0c38cc32bb351f0c7beca56a">IsEmployeePrimary</a> = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToBoolean(row.ItemArray[2]);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_filterteavaible&quot;</span>)</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                    filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aa1b6b8e256de42af38cb87ef126ec3a1">TimeExitAvaible</a> = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToBoolean(row.ItemArray[2]);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_filterte&quot;</span>)</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                    filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a7c0abe46b71e73ea87b906dfefd43fab">TimeExit</a> = row.ItemArray[2].ToString();</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_filteremplavaible&quot;</span>)</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                    filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#af1207ffa220fc4ba3ba844c74fe7bf4f">EmplAvaible</a> = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToBoolean(row.ItemArray[2]);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_filtersubempl&quot;</span>)</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                    filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a2a2914ad46a63b90fcdc1131dad653f9">IsSubEmployee</a> = <a class="code" href="../../de/db9/namespace_convert.html">Convert</a>.ToBoolean(row.ItemArray[2]);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_callerPosition&quot;</span>)</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                    <span class="keywordtype">string</span>[] arr = row.ItemArray[2].ToString().Split(<span class="keyword">new</span>[]{<span class="stringliteral">&quot;,&quot;</span>}, StringSplitOptions.RemoveEmptyEntries);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                    <span class="keywordflow">if</span> (arr.Length == 2)</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                    {</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                        filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a9ab94eb470494653907931ee5528616a">PairCallerPosition</a> = <span class="keyword">new</span> Pair(arr[0], arr[1]);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                    }</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                }</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_callerSize&quot;</span>)</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                    <span class="keywordtype">string</span>[] arr = row.ItemArray[2].ToString().Split(<span class="keyword">new</span>[] { <span class="stringliteral">&quot;,&quot;</span> }, StringSplitOptions.RemoveEmptyEntries);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                    <span class="keywordflow">if</span> (arr.Length == 2)</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                    {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                        filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#acc4c7ae717c5b76ae082e9ef76bbdf1f">PairCallerSize</a> = <span class="keyword">new</span> Pair(arr[0], arr[1]);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                    }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_alertPosition&quot;</span>)</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                    <span class="keywordtype">string</span>[] arr = row.ItemArray[2].ToString().Split(<span class="keyword">new</span>[] { <span class="stringliteral">&quot;,&quot;</span> }, StringSplitOptions.RemoveEmptyEntries);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                    <span class="keywordflow">if</span> (arr.Length == 2)</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                    {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                        filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a1b88b459610a3ded9287960d146c2187">PairAlertPosition</a> = <span class="keyword">new</span> Pair(arr[0], arr[1]);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                    }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                }</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_alertSize&quot;</span>)</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                    <span class="keywordtype">string</span>[] arr = row.ItemArray[2].ToString().Split(<span class="keyword">new</span>[] { <span class="stringliteral">&quot;,&quot;</span> }, StringSplitOptions.RemoveEmptyEntries);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                    <span class="keywordflow">if</span> (arr.Length == 2)</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                    {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                        filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a6c7871eb9b1cf8a43563527a7cd03e6b">PairAlertSize</a> = <span class="keyword">new</span> Pair(arr[0], arr[1]);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                    }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_filteremployee&quot;</span> &amp;&amp; !row.ItemArray[2].ToString().Contains(<span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;&quot;</span>))</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                    filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a651849320b893732ee589c2796b4f491">PersonItems</a> = row.ItemArray[2].ToString();</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_filtercompany&quot;</span> &amp;&amp; !row.ItemArray[2].ToString().Contains(<span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;&quot;</span>))</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                    filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aa86b2835b78d77d0e94d17d89460354c">CompanyItems</a> = row.ItemArray[2].ToString();</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_filterpost&quot;</span> &amp;&amp; !row.ItemArray[2].ToString().Contains(<span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;&quot;</span>))</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                    filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a447b47a9d561760ec91088f78bc93d74">PositionItems</a> = row.ItemArray[2].ToString();</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                <span class="keywordflow">if</span> (row.ItemArray[1].ToString() == <span class="stringliteral">&quot;tc_filtersubdivision&quot;</span> &amp;&amp; !row.ItemArray[2].ToString().Contains(<span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;&quot;</span>))</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                    filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#adfda424725516d82e1450acc01b2c9e8">SubdivisionItems</a> = row.ItemArray[2].ToString();</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                <span class="keywordflow">if</span> (!row.ItemArray[2].ToString().Contains(<span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;&quot;</span>)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                <span class="keywordflow">switch</span> (row.ItemArray[1].ToString())</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;tc_filteremployee&quot;</span>: <span class="comment">//filter.PersonItems = (List&lt;Item&gt;)Deserialize(row.ItemArray[2].ToString(), typeof(List&lt;Item&gt;));</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;tc_filtercompany&quot;</span>: <span class="comment">//filter.CompanyItems = (List&lt;Item&gt;)Deserialize(row.ItemArray[2].ToString(), typeof(List&lt;Item&gt;));</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;tc_filterpost&quot;</span>: <span class="comment">//filter.PositionItems = (List&lt;Item&gt;)Deserialize(row.ItemArray[2].ToString(), typeof(List&lt;Item&gt;));</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;tc_filtersubdivision&quot;</span>: <span class="comment">//filter.SubdivisionItems = (List&lt;Item&gt;)Deserialize(row.ItemArray[2].ToString(), typeof(List&lt;Item&gt;));</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;tc_emplperiodinfo&quot;</span>:   filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a74438135e5f6a03c6fe2de156bed405a">PeriodInfo</a> = (<a class="code" href="../../d0/dbd/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_period_info.html">PeriodInfo</a>)<a class="code" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#a0fb5aabdedf2a086076136bb7ab53310">Deserialize</a>(row.ItemArray[2].ToString(), typeof(<a class="code" href="../../d0/dbd/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_period_info.html">PeriodInfo</a>));</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                                                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                }</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            }</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            <span class="keywordflow">return</span> filter;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_aeb8ea71d0365076f70c02d8163b2b135"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Kesco.App.Web.TimeControl.Entities.Filter.Clid</a></div><div class="ttdeci">string Clid</div><div class="ttdoc">Id клиента, используется в таблице Настройки </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00101">Filter.cs:101</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a74438135e5f6a03c6fe2de156bed405a"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a74438135e5f6a03c6fe2de156bed405a">Kesco.App.Web.TimeControl.Entities.Filter.PeriodInfo</a></div><div class="ttdeci">PeriodInfo PeriodInfo</div><div class="ttdoc">Период </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00076">Filter.cs:76</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query_html_a0fb5aabdedf2a086076136bb7ab53310"><div class="ttname"><a href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#a0fb5aabdedf2a086076136bb7ab53310">Kesco.App.Web.TimeControl.Common.ExecQuery.Deserialize</a></div><div class="ttdeci">object Deserialize(string source, Type t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d41/_exec_query_8cs_source.html#l00796">ExecQuery.cs:796</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a6c7871eb9b1cf8a43563527a7cd03e6b"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a6c7871eb9b1cf8a43563527a7cd03e6b">Kesco.App.Web.TimeControl.Entities.Filter.PairAlertSize</a></div><div class="ttdeci">Pair PairAlertSize</div><div class="ttdoc">Пара высота/ширина диалогового окна сообщения </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00091">Filter.cs:91</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_acc4c7ae717c5b76ae082e9ef76bbdf1f"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#acc4c7ae717c5b76ae082e9ef76bbdf1f">Kesco.App.Web.TimeControl.Entities.Filter.PairCallerSize</a></div><div class="ttdeci">Pair PairCallerSize</div><div class="ttdoc">Пара высота/ширина диалогового окна звонилки </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00081">Filter.cs:81</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a065717f6a67731e21a0327fccd95f55f"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a065717f6a67731e21a0327fccd95f55f">Kesco.App.Web.TimeControl.Entities.Filter.RowsPerPageDetails</a></div><div class="ttdeci">int RowsPerPageDetails</div><div class="ttdoc">Количество записей на странице детализации </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00060">Filter.cs:60</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a1b88b459610a3ded9287960d146c2187"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a1b88b459610a3ded9287960d146c2187">Kesco.App.Web.TimeControl.Entities.Filter.PairAlertPosition</a></div><div class="ttdeci">Pair PairAlertPosition</div><div class="ttdoc">Пара координат x,y диалогового окна сообщения </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00096">Filter.cs:96</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a518d7c22bc8141b346680db90f3fd500"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a518d7c22bc8141b346680db90f3fd500">Kesco.App.Web.TimeControl.Entities.Filter.RowsPerPage</a></div><div class="ttdeci">int RowsPerPage</div><div class="ttdoc">Количество записей на странице </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00055">Filter.cs:55</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a2a2914ad46a63b90fcdc1131dad653f9"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a2a2914ad46a63b90fcdc1131dad653f9">Kesco.App.Web.TimeControl.Entities.Filter.IsSubEmployee</a></div><div class="ttdeci">bool IsSubEmployee</div><div class="ttdoc">Признак включая подчиненных </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00050">Filter.cs:50</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a9ab94eb470494653907931ee5528616a"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a9ab94eb470494653907931ee5528616a">Kesco.App.Web.TimeControl.Entities.Filter.PairCallerPosition</a></div><div class="ttdeci">Pair PairCallerPosition</div><div class="ttdoc">Пара координат x,y диалогового окна звонилки </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00086">Filter.cs:86</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_adfda424725516d82e1450acc01b2c9e8"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#adfda424725516d82e1450acc01b2c9e8">Kesco.App.Web.TimeControl.Entities.Filter.SubdivisionItems</a></div><div class="ttdeci">string SubdivisionItems</div><div class="ttdoc">Коллекция условий </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00020">Filter.cs:20</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_period_info_html"><div class="ttname"><a href="../../d0/dbd/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_period_info.html">Kesco.App.Web.TimeControl.Entities.PeriodInfo</a></div><div class="ttdoc">Бизнес-объект - период </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/_period_info_8cs_source.html#l00009">PeriodInfo.cs:9</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_aa1b6b8e256de42af38cb87ef126ec3a1"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aa1b6b8e256de42af38cb87ef126ec3a1">Kesco.App.Web.TimeControl.Entities.Filter.TimeExitAvaible</a></div><div class="ttdeci">bool TimeExitAvaible</div><div class="ttdoc">Признак учета времени Ушедшие до </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00035">Filter.cs:35</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a7c0abe46b71e73ea87b906dfefd43fab"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a7c0abe46b71e73ea87b906dfefd43fab">Kesco.App.Web.TimeControl.Entities.Filter.TimeExit</a></div><div class="ttdeci">string TimeExit</div><div class="ttdoc">Время ухода </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00040">Filter.cs:40</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a1bf0aac7a15a94d312ac5728e813f799"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a1bf0aac7a15a94d312ac5728e813f799">Kesco.App.Web.TimeControl.Entities.Filter.IsDetailNoEmpty</a></div><div class="ttdeci">bool IsDetailNoEmpty</div><div class="ttdoc">Признак не отображать пустые строки в детализации </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00065">Filter.cs:65</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_aa86b2835b78d77d0e94d17d89460354c"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aa86b2835b78d77d0e94d17d89460354c">Kesco.App.Web.TimeControl.Entities.Filter.CompanyItems</a></div><div class="ttdeci">string CompanyItems</div><div class="ttdoc">Коллекция условий </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00015">Filter.cs:15</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a651849320b893732ee589c2796b4f491"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a651849320b893732ee589c2796b4f491">Kesco.App.Web.TimeControl.Entities.Filter.PersonItems</a></div><div class="ttdeci">string PersonItems</div><div class="ttdoc">Коллекция условий </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00030">Filter.cs:30</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_af1207ffa220fc4ba3ba844c74fe7bf4f"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#af1207ffa220fc4ba3ba844c74fe7bf4f">Kesco.App.Web.TimeControl.Entities.Filter.EmplAvaible</a></div><div class="ttdeci">bool EmplAvaible</div><div class="ttdoc">Признак сотрудников имеющих карточки и/или должности </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00045">Filter.cs:45</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a447b47a9d561760ec91088f78bc93d74"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a447b47a9d561760ec91088f78bc93d74">Kesco.App.Web.TimeControl.Entities.Filter.PositionItems</a></div><div class="ttdeci">string PositionItems</div><div class="ttdoc">Коллекция условий </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00025">Filter.cs:25</a></div></div>
<div class="ttc" id="namespace_convert_html"><div class="ttname"><a href="../../de/db9/namespace_convert.html">Convert</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a21e1eafb0c38cc32bb351f0c7beca56a"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a21e1eafb0c38cc32bb351f0c7beca56a">Kesco.App.Web.TimeControl.Entities.Filter.IsEmployeePrimary</a></div><div class="ttdeci">bool IsEmployeePrimary</div><div class="ttdoc">Признак расчета нарушений режима в пользу сотрудника </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00070">Filter.cs:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0126a19cde97d3f6426f49600c955e47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0126a19cde97d3f6426f49600c955e47">&#9670;&nbsp;</a></span>SaveSettings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Kesco.App.Web.TimeControl.Common.ExecQuery.SaveSettings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html">Filter</a>&#160;</td>
          <td class="paramname"><em>filter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Сохранение настроек пользователя </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">filter</td><td>Настройки </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DetailedException</td><td>SQL ошибка</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00580">580</a></p>

<p class="reference">Используется в <a class="el" href="../../d7/d2d/_time_details_form_8aspx_8cs_source.html#l00087">Kesco.App.Web.TimeControl.Forms.TimeDetailsForm.SaveParams()</a>, <a class="el" href="../../d2/ded/_empl_days_details_form_8aspx_8cs_source.html#l00640">Kesco.App.Web.TimeControl.Forms.EmplDaysDetailsForm.SaveParams()</a> и <a class="el" href="../../de/d65/_kesco_8_app_8_web_8_time_control_2_forms_2_default_8aspx_8cs_source.html#l00895">Kesco.App.Web.TimeControl.Forms.Default.SaveParams()</a>.</p>
<div class="fragment"><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <span class="keywordflow">if</span> (String.IsNullOrEmpty(filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>))</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a> = <span class="stringliteral">&quot;0&quot;</span>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <span class="comment">//string item = Serialize(filter, typeof(List&lt;Item&gt;), &quot;CardPerson&quot;);</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            <span class="keywordtype">string</span> sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_filteremployee&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a651849320b893732ee589c2796b4f491">PersonItems</a>);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <span class="comment">//item = Serialize(filter, typeof(List&lt;Item&gt;), &quot;Company&quot;);</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_filtercompany&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aa86b2835b78d77d0e94d17d89460354c">CompanyItems</a>);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <span class="comment">//item = Serialize(filter, typeof(List&lt;Item&gt;), &quot;Position&quot;);</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_filterpost&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a447b47a9d561760ec91088f78bc93d74">PositionItems</a>.Replace(<span class="stringliteral">&quot;&#39;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="comment">//item = Serialize(filter, typeof(List&lt;Item&gt;), &quot;Subdivision&quot;);</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_filtersubdivision&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#adfda424725516d82e1450acc01b2c9e8">SubdivisionItems</a>.Replace(<span class="stringliteral">&quot;&#39;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="keywordtype">string</span> item = <a class="code" href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#aadabb9a7b73b8e0303af8f688e64add5">Serialize</a>(filter, typeof(<a class="code" href="../../d0/dbd/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_period_info.html">PeriodInfo</a>), <span class="stringliteral">&quot;PeriodInfo&quot;</span>);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_emplperiodinfo&quot;</span>, item);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, {2})&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_emplrowsperpage&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a518d7c22bc8141b346680db90f3fd500">RowsPerPage</a>);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, {2})&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_detailrows&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a065717f6a67731e21a0327fccd95f55f">RowsPerPageDetails</a>);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_detailnoempty&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a1bf0aac7a15a94d312ac5728e813f799">IsDetailNoEmpty</a>);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_employeeprimary&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a21e1eafb0c38cc32bb351f0c7beca56a">IsEmployeePrimary</a>);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_filterteavaible&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aa1b6b8e256de42af38cb87ef126ec3a1">TimeExitAvaible</a>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_filterte&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a7c0abe46b71e73ea87b906dfefd43fab">TimeExit</a>);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_filteremplavaible&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#af1207ffa220fc4ba3ba844c74fe7bf4f">EmplAvaible</a>);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_filtersubempl&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a2a2914ad46a63b90fcdc1131dad653f9">IsSubEmployee</a>);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="keywordflow">if</span> (filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a9ab94eb470494653907931ee5528616a">PairCallerPosition</a> != null &amp;&amp; !String.IsNullOrEmpty(filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a9ab94eb470494653907931ee5528616a">PairCallerPosition</a>.First.ToString()) &amp;&amp; !String.IsNullOrEmpty(filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a9ab94eb470494653907931ee5528616a">PairCallerPosition</a>.Second.ToString()))</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_callerPosition&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a9ab94eb470494653907931ee5528616a">PairCallerPosition</a>.First + <span class="stringliteral">&quot;,&quot;</span> + filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a9ab94eb470494653907931ee5528616a">PairCallerPosition</a>.Second);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            <span class="keywordflow">if</span> (filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#acc4c7ae717c5b76ae082e9ef76bbdf1f">PairCallerSize</a> != null &amp;&amp; !String.IsNullOrEmpty(filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#acc4c7ae717c5b76ae082e9ef76bbdf1f">PairCallerSize</a>.First.ToString()) &amp;&amp; !String.IsNullOrEmpty(filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#acc4c7ae717c5b76ae082e9ef76bbdf1f">PairCallerSize</a>.Second.ToString()))</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_callerSize&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#acc4c7ae717c5b76ae082e9ef76bbdf1f">PairCallerSize</a>.First + <span class="stringliteral">&quot;,&quot;</span> + filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#acc4c7ae717c5b76ae082e9ef76bbdf1f">PairCallerSize</a>.Second);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="keywordflow">if</span> (filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a1b88b459610a3ded9287960d146c2187">PairAlertPosition</a> != null &amp;&amp; !String.IsNullOrEmpty(filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a1b88b459610a3ded9287960d146c2187">PairAlertPosition</a>.First.ToString()) &amp;&amp; !String.IsNullOrEmpty(filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a1b88b459610a3ded9287960d146c2187">PairAlertPosition</a>.Second.ToString()))</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_alertPosition&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a1b88b459610a3ded9287960d146c2187">PairAlertPosition</a>.First + <span class="stringliteral">&quot;,&quot;</span> + filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a1b88b459610a3ded9287960d146c2187">PairAlertPosition</a>.Second);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            }</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <span class="keywordflow">if</span> (filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a6c7871eb9b1cf8a43563527a7cd03e6b">PairAlertSize</a> != null &amp;&amp; !String.IsNullOrEmpty(filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a6c7871eb9b1cf8a43563527a7cd03e6b">PairAlertSize</a>.First.ToString()) &amp;&amp; !String.IsNullOrEmpty(filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a6c7871eb9b1cf8a43563527a7cd03e6b">PairAlertSize</a>.Second.ToString()))</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                sql = String.Format(<span class="stringliteral">@&quot;INSERT INTO vwНастройки(КодНастройкиКлиента, Параметр, Значение)</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="stringliteral">VALUES({0}, &#39;{1}&#39;, &#39;{2}&#39;)&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Clid</a>, <span class="stringliteral">&quot;tc_alertSize&quot;</span>, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a6c7871eb9b1cf8a43563527a7cd03e6b">PairAlertSize</a>.First + <span class="stringliteral">&quot;,&quot;</span> + filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a6c7871eb9b1cf8a43563527a7cd03e6b">PairAlertSize</a>.Second);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                <a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">DBManager</a>.<a class="code" href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">GetData</a>(sql, Global.ConnectionString);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_aeb8ea71d0365076f70c02d8163b2b135"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aeb8ea71d0365076f70c02d8163b2b135">Kesco.App.Web.TimeControl.Entities.Filter.Clid</a></div><div class="ttdeci">string Clid</div><div class="ttdoc">Id клиента, используется в таблице Настройки </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00101">Filter.cs:101</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html">Kesco.Lib.DALC.DBManager</a></div><div class="ttdoc">Объект управления подключениями и запросами к БД </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00016">DBManager.cs:16</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query_html_aadabb9a7b73b8e0303af8f688e64add5"><div class="ttname"><a href="../../d7/d6c/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_common_1_1_exec_query.html#aadabb9a7b73b8e0303af8f688e64add5">Kesco.App.Web.TimeControl.Common.ExecQuery.Serialize</a></div><div class="ttdeci">string Serialize(Filter filter, Type t, string type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d41/_exec_query_8cs_source.html#l00775">ExecQuery.cs:775</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a6c7871eb9b1cf8a43563527a7cd03e6b"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a6c7871eb9b1cf8a43563527a7cd03e6b">Kesco.App.Web.TimeControl.Entities.Filter.PairAlertSize</a></div><div class="ttdeci">Pair PairAlertSize</div><div class="ttdoc">Пара высота/ширина диалогового окна сообщения </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00091">Filter.cs:91</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_acc4c7ae717c5b76ae082e9ef76bbdf1f"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#acc4c7ae717c5b76ae082e9ef76bbdf1f">Kesco.App.Web.TimeControl.Entities.Filter.PairCallerSize</a></div><div class="ttdeci">Pair PairCallerSize</div><div class="ttdoc">Пара высота/ширина диалогового окна звонилки </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00081">Filter.cs:81</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a065717f6a67731e21a0327fccd95f55f"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a065717f6a67731e21a0327fccd95f55f">Kesco.App.Web.TimeControl.Entities.Filter.RowsPerPageDetails</a></div><div class="ttdeci">int RowsPerPageDetails</div><div class="ttdoc">Количество записей на странице детализации </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00060">Filter.cs:60</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a1b88b459610a3ded9287960d146c2187"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a1b88b459610a3ded9287960d146c2187">Kesco.App.Web.TimeControl.Entities.Filter.PairAlertPosition</a></div><div class="ttdeci">Pair PairAlertPosition</div><div class="ttdoc">Пара координат x,y диалогового окна сообщения </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00096">Filter.cs:96</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a518d7c22bc8141b346680db90f3fd500"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a518d7c22bc8141b346680db90f3fd500">Kesco.App.Web.TimeControl.Entities.Filter.RowsPerPage</a></div><div class="ttdeci">int RowsPerPage</div><div class="ttdoc">Количество записей на странице </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00055">Filter.cs:55</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a2a2914ad46a63b90fcdc1131dad653f9"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a2a2914ad46a63b90fcdc1131dad653f9">Kesco.App.Web.TimeControl.Entities.Filter.IsSubEmployee</a></div><div class="ttdeci">bool IsSubEmployee</div><div class="ttdoc">Признак включая подчиненных </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00050">Filter.cs:50</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a9ab94eb470494653907931ee5528616a"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a9ab94eb470494653907931ee5528616a">Kesco.App.Web.TimeControl.Entities.Filter.PairCallerPosition</a></div><div class="ttdeci">Pair PairCallerPosition</div><div class="ttdoc">Пара координат x,y диалогового окна звонилки </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00086">Filter.cs:86</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_adfda424725516d82e1450acc01b2c9e8"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#adfda424725516d82e1450acc01b2c9e8">Kesco.App.Web.TimeControl.Entities.Filter.SubdivisionItems</a></div><div class="ttdeci">string SubdivisionItems</div><div class="ttdoc">Коллекция условий </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00020">Filter.cs:20</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_period_info_html"><div class="ttname"><a href="../../d0/dbd/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_period_info.html">Kesco.App.Web.TimeControl.Entities.PeriodInfo</a></div><div class="ttdoc">Бизнес-объект - период </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de0/_period_info_8cs_source.html#l00009">PeriodInfo.cs:9</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_aa1b6b8e256de42af38cb87ef126ec3a1"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aa1b6b8e256de42af38cb87ef126ec3a1">Kesco.App.Web.TimeControl.Entities.Filter.TimeExitAvaible</a></div><div class="ttdeci">bool TimeExitAvaible</div><div class="ttdoc">Признак учета времени Ушедшие до </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00035">Filter.cs:35</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a7c0abe46b71e73ea87b906dfefd43fab"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a7c0abe46b71e73ea87b906dfefd43fab">Kesco.App.Web.TimeControl.Entities.Filter.TimeExit</a></div><div class="ttdeci">string TimeExit</div><div class="ttdoc">Время ухода </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00040">Filter.cs:40</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a1bf0aac7a15a94d312ac5728e813f799"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a1bf0aac7a15a94d312ac5728e813f799">Kesco.App.Web.TimeControl.Entities.Filter.IsDetailNoEmpty</a></div><div class="ttdeci">bool IsDetailNoEmpty</div><div class="ttdoc">Признак не отображать пустые строки в детализации </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00065">Filter.cs:65</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_aa86b2835b78d77d0e94d17d89460354c"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aa86b2835b78d77d0e94d17d89460354c">Kesco.App.Web.TimeControl.Entities.Filter.CompanyItems</a></div><div class="ttdeci">string CompanyItems</div><div class="ttdoc">Коллекция условий </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00015">Filter.cs:15</a></div></div>
<div class="ttc" id="class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager_html_aa11e3782b0718aa67362339b762327b3"><div class="ttname"><a href="../../dd/d84/class_kesco_1_1_lib_1_1_d_a_l_c_1_1_d_b_manager.html#aa11e3782b0718aa67362339b762327b3">Kesco.Lib.DALC.DBManager.GetData</a></div><div class="ttdeci">static DataTable GetData(string sql, string cn)</div><div class="ttdoc">Выполнение переданного sql </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5f/_d_b_manager_8cs_source.html#l00123">DBManager.cs:123</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a651849320b893732ee589c2796b4f491"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a651849320b893732ee589c2796b4f491">Kesco.App.Web.TimeControl.Entities.Filter.PersonItems</a></div><div class="ttdeci">string PersonItems</div><div class="ttdoc">Коллекция условий </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00030">Filter.cs:30</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_af1207ffa220fc4ba3ba844c74fe7bf4f"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#af1207ffa220fc4ba3ba844c74fe7bf4f">Kesco.App.Web.TimeControl.Entities.Filter.EmplAvaible</a></div><div class="ttdeci">bool EmplAvaible</div><div class="ttdoc">Признак сотрудников имеющих карточки и/или должности </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00045">Filter.cs:45</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a447b47a9d561760ec91088f78bc93d74"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a447b47a9d561760ec91088f78bc93d74">Kesco.App.Web.TimeControl.Entities.Filter.PositionItems</a></div><div class="ttdeci">string PositionItems</div><div class="ttdoc">Коллекция условий </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00025">Filter.cs:25</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a21e1eafb0c38cc32bb351f0c7beca56a"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a21e1eafb0c38cc32bb351f0c7beca56a">Kesco.App.Web.TimeControl.Entities.Filter.IsEmployeePrimary</a></div><div class="ttdeci">bool IsEmployeePrimary</div><div class="ttdoc">Признак расчета нарушений режима в пользу сотрудника </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00070">Filter.cs:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aadabb9a7b73b8e0303af8f688e64add5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadabb9a7b73b8e0303af8f688e64add5">&#9670;&nbsp;</a></span>Serialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string Kesco.App.Web.TimeControl.Common.ExecQuery.Serialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html">Filter</a>&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Type&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a> строка <a class="el" href="../../d8/d41/_exec_query_8cs_source.html#l00775">775</a></p>
<div class="fragment"><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            <span class="keywordtype">string</span> product;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            <span class="keyword">using</span> (var stream = <span class="keyword">new</span> MemoryStream())</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                var bf = <span class="keyword">new</span> XmlSerializer(t);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                <span class="keywordflow">switch</span> (type)</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                {</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;CardPerson&quot;</span>: bf.Serialize(stream, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a651849320b893732ee589c2796b4f491">PersonItems</a>); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;Company&quot;</span>: bf.Serialize(stream, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aa86b2835b78d77d0e94d17d89460354c">CompanyItems</a>); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;Position&quot;</span>: bf.Serialize(stream, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a447b47a9d561760ec91088f78bc93d74">PositionItems</a>); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;Subdivision&quot;</span>: bf.Serialize(stream, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#adfda424725516d82e1450acc01b2c9e8">SubdivisionItems</a>); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;PeriodInfo&quot;</span>: bf.Serialize(stream, filter.<a class="code" href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a74438135e5f6a03c6fe2de156bed405a">PeriodInfo</a>); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                }</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                stream.Position = 0;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                byte[] result = stream.ToArray();</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                product = Encoding.UTF8.GetString(result);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="keywordflow">return</span> product;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        }</div><div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a74438135e5f6a03c6fe2de156bed405a"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a74438135e5f6a03c6fe2de156bed405a">Kesco.App.Web.TimeControl.Entities.Filter.PeriodInfo</a></div><div class="ttdeci">PeriodInfo PeriodInfo</div><div class="ttdoc">Период </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00076">Filter.cs:76</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_adfda424725516d82e1450acc01b2c9e8"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#adfda424725516d82e1450acc01b2c9e8">Kesco.App.Web.TimeControl.Entities.Filter.SubdivisionItems</a></div><div class="ttdeci">string SubdivisionItems</div><div class="ttdoc">Коллекция условий </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00020">Filter.cs:20</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_aa86b2835b78d77d0e94d17d89460354c"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#aa86b2835b78d77d0e94d17d89460354c">Kesco.App.Web.TimeControl.Entities.Filter.CompanyItems</a></div><div class="ttdeci">string CompanyItems</div><div class="ttdoc">Коллекция условий </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00015">Filter.cs:15</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a651849320b893732ee589c2796b4f491"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a651849320b893732ee589c2796b4f491">Kesco.App.Web.TimeControl.Entities.Filter.PersonItems</a></div><div class="ttdeci">string PersonItems</div><div class="ttdoc">Коллекция условий </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00030">Filter.cs:30</a></div></div>
<div class="ttc" id="class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter_html_a447b47a9d561760ec91088f78bc93d74"><div class="ttname"><a href="../../dd/d2f/class_kesco_1_1_app_1_1_web_1_1_time_control_1_1_entities_1_1_filter.html#a447b47a9d561760ec91088f78bc93d74">Kesco.App.Web.TimeControl.Entities.Filter.PositionItems</a></div><div class="ttdeci">string PositionItems</div><div class="ttdoc">Коллекция условий </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d29/_filter_8cs_source.html#l00025">Filter.cs:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>Объявления и описания членов класса находятся в файле:<ul>
<li>Source/WEB_V4/Kesco.App.Web.TimeControl/Common/<a class="el" href="../../d8/d41/_exec_query_8cs_source.html">ExecQuery.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Документация по Kesco Development Network. Последние изменения: Пт 6 Апр 2018 17:25:39. Создано системой &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
